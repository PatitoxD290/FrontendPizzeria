<h2 mat-dialog-title class="dialog-title">
  Detalles del Pedido #{{ data.pedido_id }}
</h2>

<mat-dialog-content class="dialog-content">
  <!-- üåÄ Loading Spinner -->
  <div *ngIf="loading" class="spinner-container">
    <mat-spinner diameter="50"></mat-spinner>
  </div>

  <!-- ‚ö†Ô∏è Error -->
  <div *ngIf="!loading && error" class="error-text">
    <mat-card>
      <mat-card-content>
        <p>{{ error }}</p>
      </mat-card-content>
    </mat-card>
  </div>

  <!-- üìù Notas del pedido -->
  <div *ngIf="!loading && !error && notas" class="detalle-texto">
    <mat-card>
      <mat-card-content>
        <p><strong>Notas:</strong></p>
        <p>{{ notas }}</p>
      </mat-card-content>
    </mat-card>
  </div>

  <!-- üì¶ Detalles como cards -->
  <div *ngIf="!loading && !error && detalles.length > 0; else sinDatos">
    <mat-card *ngFor="let d of detalles" class="detalle-card">
      <mat-card-content>
        <p><strong>Producto:</strong> {{ d.nombre_producto }}</p>
        <p><strong>Categor√≠a:</strong> {{ d.nombre_categoria }}</p>
        <p><strong>Tama√±o:</strong> {{ d.nombre_tamano }}</p>
        <p><strong>Cantidad:</strong> {{ d.Cantidad }}</p>
        <p><strong>SubTotal:</strong> S/ {{ d.PrecioTotal | number:'1.2-2' }}</p>
      </mat-card-content>
    </mat-card>

    <!-- Total -->
    <mat-card class="total-card">
      <mat-card-content>
        <p><strong>Total del pedido:</strong> S/ {{ getTotal() | number:'1.2-2' }}</p>
      </mat-card-content>
    </mat-card>
  </div>

  <ng-template #sinDatos>
    <p class="text-gray-500 text-center">No hay detalles disponibles para este pedido.</p>
  </ng-template>
</mat-dialog-content>

<mat-dialog-actions align="end">
  <button mat-raised-button color="primary" (click)="close()">Cerrar</button>
</mat-dialog-actions>
