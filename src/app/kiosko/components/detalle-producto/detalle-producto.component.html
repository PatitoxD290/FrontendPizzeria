<div class="detalle-container">
  <img [src]="data.imagen" alt="{{ data.Nombre }}" class="detalle-imagen" />

  <h2>{{ data.Nombre }}</h2>
  <p class="producto-descripcion">{{ data.Descripcion }}</p>

  <!-- ðŸ”¹ SELECCIÃ“N DE TAMAÃ‘OS (SOLO SI HAY MÃS DE UN TAMAÃ‘O) -->
  <div *ngIf="data.tamanos && data.tamanos.length > 1" class="tamanos-section">
    <h3>Selecciona un tamaÃ±o:</h3>
    <div class="tamanos-grid">
      <button 
        *ngFor="let tamano of data.tamanos" 
        class="tamano-btn" 
        [class.selected]="tamanoSeleccionado?.ID_Producto_T === tamano.ID_Producto_T"
        (click)="seleccionarTamano(tamano)">
        <span class="tamano-nombre">{{ tamano.nombre_tamano }}</span>
      </button>
    </div>
  </div>

  <!-- ðŸ”¹ INFORMACIÃ“N DEL PRECIO Y CANTIDAD -->
  <div class="precio-cantidad-section">
    <div class="precio-info" *ngIf="tamanoSeleccionado">
      <p class="tamano-seleccionado">
        <strong>{{ tamanoSeleccionado.nombre_tamano }}</strong>
      </p>
      <p class="precio-total">S/. {{ precioTotal | number:'1.2-2' }}</p>
    </div>

    <!-- Controles de cantidad -->
    <div class="cantidad-container">
      <div class="cantidad-controls">
        <button (click)="decrementarCantidad()">âˆ’</button>
        <span class="cantidad-display">{{ cantidad }}</span>
        <button (click)="incrementarCantidad()">+</button>
      </div>
    </div>
  </div>

  <!-- ðŸ”¹ BOTÃ“N: AÃ±adir Complementos - SOLO SI NO ES BEBIDA -->
  <div class="complementos-section" *ngIf="!esBebida">
    <button class="btn-complementos" (click)="abrirComplementos()">
      <div class="btn-complementos-content">
        <mat-icon>local_cafe</mat-icon>
        <div class="btn-complementos-text">
          <!-- ðŸ”¹ MODIFICADO: Mostrar solo la cantidad cuando hay selecciones -->
          <span *ngIf="tieneComplementos; else sinComplementos" class="btn-complementos-count">
            {{ cantidadComplementos }} seleccionado(s)
          </span>
          <ng-template #sinComplementos>
            <span class="btn-complementos-title">AÃ±adir Complementos</span>
          </ng-template>
        </div>
      </div>
    </button>
  </div>

  <!-- Botones abajo -->
  <div class="acciones">
    <button class="btn-volver" (click)="cerrar()">Volver</button>
    <button class="btn-agregar" (click)="agregarCarrito()" [disabled]="!tamanoSeleccionado">
      <mat-icon>add_shopping_cart</mat-icon>
      Agregar al Pedido
    </button>
  </div>
</div>