<div class="menu-container">
  
  <!-- üîç Barra de B√∫squeda -->
  <div class="search-section">
    <div class="search-box">
      <mat-icon>search</mat-icon>
      <input 
        type="text" 
        placeholder="¬øQu√© desea ordenar hoy?" 
        [(ngModel)]="terminoBusqueda" 
        (keyup)="buscarProducto()">
      <button *ngIf="terminoBusqueda" mat-icon-button (click)="terminoBusqueda=''; buscarProducto()">
        <mat-icon>close</mat-icon>
      </button>
    </div>
  </div>

<<<<<<< HEAD
  <!-- üè∑Ô∏è Categor√≠as (Scroll Horizontal) -->
  <div class="categories-scroll">
    <mat-chip-listbox class="mat-mdc-chip-set-stacked">
      <mat-chip-option 
        [selected]="categoriaSeleccionada === null" 
        (click)="filtrarPorCategoria(null)"
        color="accent">
        Todos
      </mat-chip-option>
      <mat-chip-option 
        *ngFor="let cat of categorias" 
        [selected]="categoriaSeleccionada === cat.ID_Categoria_P"
        (click)="filtrarPorCategoria(cat.ID_Categoria_P)"
        color="primary">
        {{ cat.Nombre }}
      </mat-chip-option>
    </mat-chip-listbox>
  </div>

  <!-- üåÄ Loading -->
  <div *ngIf="loading" class="loading-container">
    <mat-spinner diameter="50"></mat-spinner>
  </div>

  <!-- üì¶ Grid de Productos -->
  <div *ngIf="!loading" class="products-grid" id="menu-grid">
    
    <mat-card 
      *ngFor="let producto of paginatedProductos" 
      class="product-card" 
      (click)="seleccionarProducto(producto)"
      [class.disabled]="producto.Cantidad_Disponible === 0">
      
      <div class="card-image">
        <img [src]="getProductoImage(producto)" [alt]="producto.Nombre" (error)="onImageError($event)">
        <div class="stock-badge" *ngIf="producto.Cantidad_Disponible > 0 && producto.Cantidad_Disponible <= 5">
          ¬°Quedan {{producto.Cantidad_Disponible}}!
        </div>
        <div class="agotado-overlay" *ngIf="producto.Cantidad_Disponible === 0">
          <span>AGOTADO</span>
        </div>
      </div>

      <mat-card-content class="card-content">
        <h3 class="product-title">{{ producto.Nombre }}</h3>
        <p class="product-category">{{ producto.nombre_categoria }}</p>
        
        <div class="product-footer">
          <span class="price-tag">{{ getPrecioDisplay(producto) }}</span>
          <span class="size-tag">{{ getInfoTamanos(producto) }}</span>
        </div>
      </mat-card-content>

      <div class="card-action-overlay">
        <button mat-mini-fab color="accent">
          <mat-icon>add</mat-icon>
        </button>
=======
<!-- Botones de categor√≠as -->
<div class="categorias-container">
  <!-- Bot√≥n Todos -->
  <button mat-raised-button 
          [color]="isCategoriaSeleccionada(null) ? 'primary' : ''" 
          (click)="filtrarPorCategoria(null)">
    Todos
  </button>

  <!-- Bot√≥n Combos -->
  <button mat-raised-button 
          [color]="isCategoriaSeleccionada(CATEGORIA_COMBOS) ? 'primary' : ''" 
          class="combo-category-btn"
          (click)="filtrarPorCategoria(CATEGORIA_COMBOS)">
    Combos
  </button>

  <!-- Categor√≠as normales de productos -->
  <button *ngFor="let cat of categorias" 
          mat-raised-button 
          [color]="isCategoriaSeleccionada(cat.ID_Categoria_P) ? 'primary' : ''" 
          (click)="filtrarPorCategoria(cat.ID_Categoria_P)">
    {{ cat.Nombre }}
  </button>
</div>

<!-- LISTA DE PRODUCTOS Y COMBOS -->
<div class="menu-scroll">
  <mat-card *ngFor="let item of paginatedItems" 
            class="producto-card"
            [class.combo-card]="item.esCombo"
            (click)="abrirModalCantidad(item)"
            [title]="item.esCombo ? getInfoCombo(item) : ''">
    
    <mat-card-header>
      <mat-card-title>
        {{ item.nombre }}
        <span *ngIf="item.esCombo" class="combo-badge">COMBO</span>
      </mat-card-title>
      <mat-card-subtitle>
        <span class="categoria" [class.combo-categoria]="item.esCombo">
          {{ getCategoria(item) }}
        </span>
        <!-- INDICADOR DE TAMA√ëOS DISPONIBLES (solo productos) -->
        <span *ngIf="!item.esCombo && tieneMultiplesTamanos(item)" class="multiples-tamanos">
          ‚Ä¢ {{ getTamanosDisponibles(item) }} tama√±os
        </span>
        <span *ngIf="!item.esCombo && !tieneMultiplesTamanos(item)" class="tamano-unico">
          ‚Ä¢ 1 tama√±o
        </span>
        <!-- üîπ CORREGIDO: Mostrar productos del combo -->
        <span *ngIf="item.esCombo" class="combo-info" [title]="getInfoCombo(item)">
          ‚Ä¢ {{ getProductosCombo(item) || 'Cargando productos...' }}
        </span>
      </mat-card-subtitle>
    </mat-card-header>
    
    <mat-card-content>
      <p class="descripcion">{{ item.descripcion }}</p>
      
      <!-- PRECIO -->
      <div class="precio-container" [class.combo-precio]="item.esCombo">
        <span *ngIf="!item.esCombo && tieneMultiplesTamanos(item)" class="precio-desde">Desde: </span>
        <span *ngIf="item.esCombo" class="precio-combo-text">Precio especial: </span>
        <span class="precio" [class.combo-precio-number]="item.esCombo">
          S/ {{ item.precio | number:'1.2-2' }}
        </span>
      </div>

      <!-- Informaci√≥n adicional -->
      <div class="info-adicional">
        <small>Disponible ‚Ä¢ {{ getCantidadDisponible(item) }} unidades</small>
>>>>>>> 71628ab0a6a7f3d7dbb4c222b0490f1c7f17032c
      </div>
    </mat-card>

    <!-- Empty State -->
    <div *ngIf="paginatedProductos.length === 0" class="no-results">
      <mat-icon>search_off</mat-icon>
      <p>No encontramos productos con esa b√∫squeda.</p>
      <button mat-button color="primary" (click)="filtrarPorCategoria(null); terminoBusqueda=''">Ver todo el men√∫</button>
    </div>

<<<<<<< HEAD
  </div>

  <!-- üìÑ Paginaci√≥n -->
  <mat-paginator 
    [length]="productosFiltrados.length"
    [pageSize]="pageSize"
    [pageSizeOptions]="pageSizeOptions"
    (page)="onPageChange($event)"
    [hidden]="productosFiltrados.length === 0"
    class="custom-paginator">
  </mat-paginator>

</div>
=======
<!-- Mensaje cuando no hay resultados -->
<div *ngIf="menuItemsFiltrados.length === 0" class="no-results">
  <mat-icon>search_off</mat-icon>
  <p>No se encontraron productos o combos</p>
</div>

<!-- Paginador Angular Material -->
<mat-paginator
  [length]="menuItemsFiltrados.length" 
  [pageSize]="pageSize" 
  [pageSizeOptions]="[3, 6, 9, 12]" 
  (page)="onPageChange($event)">
</mat-paginator>
>>>>>>> 71628ab0a6a7f3d7dbb4c222b0490f1c7f17032c
