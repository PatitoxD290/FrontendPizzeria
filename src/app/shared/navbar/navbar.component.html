<mat-toolbar class="navbar" [class.sidebar-collapsed]="isSidebarCollapsed" *ngIf="mostrarNavbar">
  
  <div class="navbar-left">
    <button mat-icon-button class="menu-btn" (click)="toggleSidebar()">
      <mat-icon>menu</mat-icon>
    </button>

    <div class="logo-container" (click)="navigateTo('/dashboard/home')">
      <div class="logo-icon">
        <img src="/assets/imgs/logop.jpg" alt="Logo Pizzería" class="logo-img">
      </div>
    </div>
  </div>

  <!-- SECCIÓN CENTRAL ELIMINADA (BUSCADOR) -->

  <div class="navbar-right">
    <button mat-icon-button class="action-btn" (click)="openNotifications()" matTooltip="Notificaciones">
      <div class="notification-wrapper">
        <mat-icon>notifications</mat-icon>
        <span class="notification-badge" *ngIf="notificationsCount > 0">
          {{ notificationsCount > 9 ? '9+' : notificationsCount }}
        </span>
      </div>
    </button>

    <button mat-icon-button class="action-btn" (click)="toggleDarkMode()" 
            [matTooltip]="isDarkMode ? 'Modo Claro' : 'Modo Oscuro'">
      <mat-icon>{{ isDarkMode ? 'light_mode' : 'dark_mode' }}</mat-icon>
    </button>

    <!-- BOTÓN DE PERFIL CON ÍCONO Y TEXTO -->
    <button mat-button class="profile-btn" [matMenuTriggerFor]="userMenu">
      <div class="profile-content">
        <div class="user-avatar-small">
          <div class="avatar-circle">
            <mat-icon class="avatar-icon">person</mat-icon>
          </div>
        </div>
        <div class="user-info-compact">
          <span class="user-name">{{ nombreUsuario }}</span>
          <span class="user-role">Administrador</span>
        </div>
        <mat-icon class="dropdown-icon">expand_more</mat-icon>
      </div>
    </button>
  </div>

  <!-- MENÚ DE USUARIO CON ÍCONO -->
  <mat-menu #userMenu="matMenu" class="user-menu" yPosition="below" xPosition="before">
    <!-- Header del usuario CON ÍCONO -->
    <div class="user-menu-header">
      <div class="user-avatar-large">
        <div class="avatar-circle-large">
          <mat-icon class="avatar-icon-large">person</mat-icon>
        </div>
      </div>
      <div class="user-info">
        <span class="user-name-large">{{ nombreUsuario }}</span>
        <span class="user-email">usuario@ejemplo.com</span>
      </div>
    </div>
    
    <mat-divider></mat-divider>
    
    <!-- Opciones del menú -->
    <button mat-menu-item (click)="navigateTo('/dashboard/cambiar-contrasena')" class="menu-item">
      <div class="menu-item-content">
        <div class="menu-icon-wrapper">
          <mat-icon class="menu-icon">lock</mat-icon>
        </div>
        <span>Cambiar contraseña</span>
      </div>
    </button>
    
    <button mat-menu-item (click)="navigateTo('/dashboard/configuracion')" class="menu-item">
      <div class="menu-item-content">
        <div class="menu-icon-wrapper">
          <mat-icon class="menu-icon">settings</mat-icon>
        </div>
        <span>Configuración</span>
      </div>
    </button>
    
    <button mat-menu-item (click)="navigateTo('/dashboard/ayuda')" class="menu-item">
      <div class="menu-item-content">
        <div class="menu-icon-wrapper">
          <mat-icon class="menu-icon">help</mat-icon>
        </div>
        <span>Centro de Ayuda</span>
      </div>
    </button>
    
    <mat-divider></mat-divider>
    
    <!-- Opción de cierre de sesión -->
    <button mat-menu-item (click)="logout()" class="logout-item menu-item">
      <div class="menu-item-content">
        <div class="menu-icon-wrapper">
          <mat-icon class="menu-icon logout-icon">logout</mat-icon>
        </div>
        <span>Cerrar sesión</span>
      </div>
    </button>
  </mat-menu>
</mat-toolbar>