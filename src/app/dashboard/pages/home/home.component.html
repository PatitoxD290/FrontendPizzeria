<div class="dashboard-container">
  <!-- Cards principales -->
  <div class="stats-cards">
    <!-- Ventas Totales -->
    <div class="stat-card sales-card">
      <div class="icon-container sales">
        <span class="material-icons">trending_up</span>
      </div>
      <div class="card-content">
        <h3>Ventas Totales</h3>
        <p class="stat-value" *ngIf="!loadingCards">{{ formatCurrency(ventasTotales) }}</p>
        <p class="stat-value" *ngIf="loadingCards">Cargando...</p>
        <div class="trend-container">
        </div>
      </div>
    </div>

    <!-- Pedidos Hoy - Card Roja -->
    <div class="stat-card orders-card">
      <div class="icon-container orders">
        <span class="material-icons">shopping_bag</span>
      </div>
      <div class="card-content">
        <h3>Pedidos Hoy</h3>
        <p class="stat-value" *ngIf="!loadingCards">{{ pedidosHoy }}</p>
        <p class="stat-value" *ngIf="loadingCards">Cargando...</p>
        <div class="trend-container">
      
        </div>
      </div>
    </div>

    <!-- Ventas de hoy -->
    <div class="stat-card product-card">
      <div class="icon-container sales">
        <span class="material-icons">shopping_cart</span>
      </div>
      <div class="card-content">
        <h3>Ventas de hoy</h3>
        <p class="stat-value" *ngIf="!loadingCards">{{ formatCurrency(ventasHoy) }}</p>
        <p class="stat-value" *ngIf="loadingCards">Cargando...</p>
        <div class="trend-container">
         
        </div>
      </div>
    </div>

    <!-- Total Clientes -->
    <div class="stat-card clients-card">
      <div class="icon-container clients">
        <span class="material-icons">people</span>
      </div>
      <div class="card-content">
        <h3>Total Clientes</h3>
        <p class="stat-value" *ngIf="!loadingCards">{{ totalClientes }}</p>
        <p class="stat-value" *ngIf="loadingCards">Cargando...</p>
        <div class="trend-container">
         
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Contenedor para gráfico y pizzas populares -->
<div class="grafico-pizzas-container">
  <!-- Gráfico de ventas semanales -->
  <div class="contenedor-grafico">
    <div class="header-grafico">
      <h2>Ventas Semanales</h2>
     <select #periodoSelect (change)="cambiarPeriodoGrafico(periodoSelect.value)">
  <option>Esta Semana</option>
  <option>Semana Pasada</option>
  <option>Último Mes</option>
</select>
    </div>

    <div class="grafico">
      <div class="eje-y">
        <span>{{ formatCurrency(maxVentaSemana) }}</span>
        <span>{{ formatCurrency(maxVentaSemana * 0.8) }}</span>
        <span>{{ formatCurrency(maxVentaSemana * 0.6) }}</span>
        <span>{{ formatCurrency(maxVentaSemana * 0.4) }}</span>
        <span>{{ formatCurrency(maxVentaSemana * 0.2) }}</span>
        <span>S/ 0</span>
      </div>

      <div class="lineas-referencia">
        <div class="linea-referencia" style="top: 0%"></div>
        <div class="linea-referencia" style="top: 20%"></div>
        <div class="linea-referencia" style="top: 40%"></div>
        <div class="linea-referencia" style="top: 60%"></div>
        <div class="linea-referencia" style="top: 80%"></div>
      </div>

      <div class="barras" *ngIf="!loadingChart">
        <div class="barra" *ngFor="let venta of ventasSemanales; let i = index" 
             [style.--valor]="calcularAlturaBarra(venta)">
          <span class="valor">{{ getValorBarra(i) }}</span>
        </div>
      </div>

      <!-- Estado de carga del gráfico -->
      <div class="barras" *ngIf="loadingChart">
        <div class="barra" *ngFor="let i of [0,1,2,3,4,5,6]" 
             style="--valor: 30%; background: #ccc;">
          <span class="valor">Cargando...</span>
        </div>
      </div>
    </div>

    <!-- Días debajo -->
    <div class="dias">
      <span>Lun</span>
      <span>Mar</span>
      <span>Mié</span>
      <span>Jue</span>
      <span>Vie</span>
      <span>Sáb</span>
      <span>Dom</span>
    </div>
  </div>

  <!-- Card de Top Pizzas Más Pedidas -->
  <div class="contenedor-populares">
    <div class="header-populares">
      <h2>Top Pizzas Más Pedidas</h2>
      <span class="material-icons">local_pizza</span>
    </div>
    
    <div class="lista-pizzas">
      <div class="pizza-item" *ngFor="let pizza of topPizzas; let i = index">
        <div class="pizza-ranking">
          <span class="ranking-numero">{{ i + 1 }}</span>
        </div>
        <div class="pizza-info">
          <h3 class="pizza-nombre">{{ pizza.nombre }}</h3>
          <p class="pizza-pedidos">{{ pizza.pedidos }} pedidos</p>
        </div>
        <div class="pizza-tendencia" [class.tendencia-up]="pizza.tendencia > 0" 
             [class.tendencia-down]="pizza.tendencia < 0">
          <span class="material-icons" *ngIf="pizza.tendencia > 0">trending_up</span>
          <span class="material-icons" *ngIf="pizza.tendencia < 0">trending_down</span>
          <span>{{ pizza.tendencia > 0 ? '+' : '' }}{{ pizza.tendencia }}%</span>
        </div>
      </div>
    </div>
    
    <div class="footer-populares">
      <span class="actualizacion-texto">Actualizado hoy</span>
    </div>
  </div>
</div>