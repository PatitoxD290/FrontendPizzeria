<!-- detalle-producto.component.html -->
<div class="detalle-container">
  <img [src]="data.imagen" alt="{{ data.Nombre }}" class="detalle-imagen" />

  <h2>{{ data.Nombre }}</h2>
  <p class="producto-descripcion">{{ data.Descripcion }}</p>

  <!-- ðŸ”¹ INFORMACIÃ“N DEL TIPO -->
  <div class="tipo-info" *ngIf="esCombo">
    <span class="badge-combo">COMBO</span>
  </div>

  <!-- ðŸ”¹ SELECCIÃ“N DE TAMAÃ‘OS (SOLO PARA PRODUCTOS INDIVIDUALES) -->
  <div *ngIf="!esCombo && data.tamanos && data.tamanos.length > 1" class="tamanos-section">
    <h3>Selecciona un tamaÃ±o:</h3>
    <div class="tamanos-grid">
      <button 
        *ngFor="let tamano of data.tamanos" 
        class="tamano-btn" 
        [class.selected]="tamanoSeleccionado?.ID_Producto_T === tamano.ID_Producto_T"
        (click)="seleccionarTamano(tamano)">
        <span class="tamano-nombre">{{ tamano.nombre_tamano }}</span>
      </button>
    </div>
  </div>

  <!-- ðŸ”¹ INFORMACIÃ“N DEL PRECIO Y CANTIDAD -->
  <div class="precio-cantidad-section">
    <div class="precio-info">
      <p class="tipo-seleccionado" *ngIf="!esCombo && tamanoSeleccionado">
        <strong>{{ tamanoSeleccionado.nombre_tamano }}</strong>
      </p>
      <p class="precio-total">S/. {{ precioTotal | number:'1.2-2' }}</p>
    </div>

    <!-- Controles de cantidad -->
    <div class="cantidad-container">
      <div class="cantidad-controls">
        <button (click)="decrementarCantidad()">âˆ’</button>
        <span class="cantidad-display">{{ cantidad }}</span>
        <button (click)="incrementarCantidad()">+</button>
      </div>
    </div>
  </div>

  <!-- ðŸ”¹ CAMBIO: BOTÃ“N AÃ‘ADIR COMPLEMENTOS - AHORA PARA PRODUCTOS NO BEBIDAS Y COMBOS -->
  <div class="complementos-section" *ngIf="puedeAgregarComplementos">
    <button class="btn-complementos" (click)="abrirComplementos()">
      <div class="btn-complementos-content">
        <mat-icon>local_cafe</mat-icon>
        <div class="btn-complementos-text">
          <span *ngIf="tieneComplementos; else sinComplementos" class="btn-complementos-count">
            {{ cantidadComplementos }} seleccionado(s)
          </span>
          <ng-template #sinComplementos>
            <span class="btn-complementos-title">
              {{ esCombo ? 'AÃ±adir Complementos' : 'AÃ±adir Complementos' }}
            </span>
          </ng-template>
        </div>
      </div>
    </button>
  </div>

  <!-- Botones abajo -->
  <div class="acciones">
    <button class="btn-volver" (click)="cerrar()">Volver</button>
    <button class="btn-agregar" 
            (click)="agregarCarrito()" 
            [disabled]="!esCombo && !tamanoSeleccionado">
      <mat-icon>add_shopping_cart</mat-icon>
      Agregar {{ tipoProducto }}
    </button>
  </div>
</div>