<div class="modal-container">
  <!-- Header -->
  <div class="modal-header">
    <h2 class="modal-title">Seleccionar producto</h2>
    <button mat-icon-button class="close-button" (click)="cancelar()">
      <mat-icon>close</mat-icon>
    </button>
  </div>

  <!-- Informaci칩n del producto -->
  <div class="producto-info">
    <h3 class="producto-nombre">{{ data.producto.Nombre }}</h3>
    <div class="producto-detalles">
      <span class="categoria">{{ data.producto.nombre_categoria }}</span>
    </div>
    <p class="producto-descripcion" *ngIf="data.producto.Descripcion">
      {{ data.producto.Descripcion }}
    </p>
  </div>

  <!-- 游댳 SELECTOR DE TAMA칌OS CON BOTONES HORIZONTALES -->
  <div class="tamanos-container" *ngIf="tamanosDisponibles.length > 0">
    <label class="tamanos-label">Selecciona un tama침o:</label>
    
    <div class="tamanos-buttons"
         [class.single-tamano]="tamanosDisponibles.length === 1"
         [class.multiple-tamanos]="tamanosDisponibles.length > 3">
      <button 
        *ngFor="let tamano of tamanosDisponibles" 
        mat-raised-button
        class="tamano-btn"
        [class.selected]="tamanoSeleccionado?.ID_Producto_T === tamano.ID_Producto_T"
        (click)="seleccionarTamano(tamano)">
        <div class="tamano-btn-content">
          <span class="tamano-nombre">{{ tamano.nombre_tamano || 'Tama침o 칰nico' }}</span>
          <span class="tamano-precio">S/ {{ tamano.Precio | number:'1.2-2' }}</span>
        </div>
      </button>
    </div>
  </div>

  <!-- Control de cantidad -->
  <div class="cantidad-container" *ngIf="tamanoSeleccionado">
    <label class="cantidad-label">Cantidad:</label>
    
    <div class="cantidad-controls">
      <button mat-icon-button 
              class="cantidad-btn" 
              (click)="reducirCantidad()"
              [disabled]="cantidad <= 1">
        <mat-icon>remove</mat-icon>
      </button>
      
      <mat-form-field appearance="outline" class="cantidad-input">
        <input matInput
               type="text"
               [value]="cantidad"
               (input)="validarEntrada($event)"
               (blur)="onCantidadChange($event)"
               maxlength="3"
               class="text-center">
      </mat-form-field>
      
      <button mat-icon-button 
              class="cantidad-btn" 
              (click)="aumentarCantidad()"
              [disabled]="cantidad >= maxCantidad">
        <mat-icon>add</mat-icon>
      </button>
    </div>

    <span class="disponible-text">{{ disponibleTexto }}</span>
  </div>

  <!-- Precio total -->
  <div class="total-container" *ngIf="tamanoSeleccionado">
    <div class="total-line"></div>
    <div class="total-info">
      <span class="total-label">Total a pagar:</span>
      <span class="total-precio">S/ {{ precioTotal | number:'1.2-2' }}</span>
    </div>
    <div class="desglose-precio" *ngIf="tamanoSeleccionado">
      <small>{{ cantidad }} 칑 S/ {{ precioUnitario | number:'1.2-2' }} = S/ {{ precioTotal | number:'1.2-2' }}</small>
    </div>
  </div>

  <!-- Botones de acci칩n -->
  <div class="action-buttons">
    <button mat-button 
            class="cancel-btn" 
            (click)="cancelar()">
      Cancelar
    </button>
    
    <button mat-raised-button 
            color="primary" 
            class="add-btn"
            (click)="agregarAlPedido()"
            [disabled]="!tamanoSeleccionado">
      <mat-icon>shopping_bag</mat-icon>
      Agregar (S/ {{ precioTotal | number:'1.2-2' }})
    </button>
  </div>
</div>