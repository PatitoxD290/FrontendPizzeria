<div class="complemento-container">
  <!-- ENCABEZADO -->
  <div class="complemento-header">
    <h2>Bebidas Disponibles</h2>
    <button mat-icon-button (click)="cerrar()" class="btn-cerrar">
      <mat-icon>close</mat-icon>
    </button>
  </div>

  <!-- ✅ INDICADOR DE SELECCIÓN MÚLTIPLE -->
  <div *ngIf="complementoService.obtenerCantidadComplementos() > 0" class="seleccion-indicador">
    <mat-icon>check_circle</mat-icon>
    <span>{{ complementoService.obtenerCantidadComplementos() }} complemento(s) seleccionado(s)</span>
  </div>

  <!-- LISTA DE BEBIDAS -->
  <div class="bebidas-grid" *ngIf="!cargando && productosBebidas.length > 0; else estado">
    <div 
      *ngFor="let producto of productosBebidas" 
      class="bebida-card" 
      [class.seleccionada]="estaSeleccionado(producto)"
      (click)="toggleComplemento(producto)">
      
      <div class="bebida-imagen-container">
        <img [src]="producto.imagen" (error)="producto.imagen = '/assets/imgs/logo.png'" [alt]="producto.Nombre" class="bebida-imagen" />
        <!-- ✅ INDICADOR VISUAL DE SELECCIÓN -->
        <div *ngIf="estaSeleccionado(producto)" class="seleccion-overlay">
          <mat-icon>check</mat-icon>
        </div>
      </div>
      
      <div class="bebida-info">
        <h4 class="bebida-nombre">{{ producto.Nombre }}</h4>
        <p class="bebida-categoria">{{ producto.nombre_categoria }}</p>
        
        <!-- Información del tamaño y precio -->
        <div *ngIf="producto.tamanos && producto.tamanos.length > 0" class="bebida-meta">
          <span class="bebida-tamano">{{ producto.tamanos[0].nombre_tamano || 'Estándar' }}</span>
          <span class="bebida-precio">S/. {{ getPrecioProducto(producto) | number:'1.2-2' }}</span>
        </div>
      </div>
    </div>
  </div>

  <!-- ESTADOS: CARGANDO O VACÍO -->
  <ng-template #estado>
    <div class="estado-container">
      <div *ngIf="cargando" class="cargando">
        <p>Cargando bebidas...</p>
      </div>
      <div *ngIf="!cargando && productosBebidas.length === 0" class="sin-bebidas">
        <p>No hay bebidas disponibles</p>
      </div>
    </div>
  </ng-template>

  <!-- ✅ BOTÓN PARA FINALIZAR SELECCIÓN -->
  <div class="complemento-acciones" *ngIf="complementoService.obtenerCantidadComplementos() > 0">
    <button class="btn-finalizar" (click)="finalizarSeleccion()">
      <mat-icon>check</mat-icon>
      Confirmar {{ complementoService.obtenerCantidadComplementos() }} Complemento(s)
    </button>
  </div>
</div>