<<<<<<< HEAD
<div class="pedido-container">
  
  <!-- Header -->
  <div class="pedido-header">
    <h3>Resumen del Pedido</h3>
    <span class="codigo-badge">{{ codigoPedido }}</span>
  </div>

  <!-- Tabla -->
  <div class="table-wrapper mat-elevation-z1">
    <table mat-table [dataSource]="detalles" class="w-100">

      <!-- Producto / Combo -->
      <ng-container matColumnDef="producto">
        <th mat-header-cell *matHeaderCellDef> Descripci칩n </th>
        <td mat-cell *matCellDef="let d">
          <div class="item-info">
            <div class="item-name">
              <mat-icon *ngIf="esCombo(d)" class="icon-combo">fastfood</mat-icon>
              <mat-icon *ngIf="!esCombo(d)" class="icon-product">restaurant</mat-icon>
              {{ getNombreItem(d) }}
            </div>
            
            <div class="item-meta">
              <span class="badge-tipo" [class.is-combo]="esCombo(d)">
                {{ esCombo(d) ? 'Combo' : d.Tamano_Nombre }}
              </span>
            </div>
          </div>
        </td>
      </ng-container>

      <!-- Cantidad -->
      <ng-container matColumnDef="cantidad">
        <th mat-header-cell *matHeaderCellDef class="text-center"> Cant. </th>
        <td mat-cell *matCellDef="let d">
          <div class="qty-control">
            <button mat-icon-button class="small-btn" (click)="reducirCantidad(d)">
              <mat-icon>remove</mat-icon>
            </button>
            <span class="qty-value">{{ d.Cantidad }}</span>
            <button mat-icon-button class="small-btn" (click)="aumentarCantidad(d)">
              <mat-icon>add</mat-icon>
            </button>
          </div>
        </td>
      </ng-container>

      <!-- Precio Unitario -->
      <ng-container matColumnDef="precio">
        <th mat-header-cell *matHeaderCellDef class="text-right"> P. Unit </th>
        <td mat-cell *matCellDef="let d" class="text-right text-muted">
          S/ {{ (d.PrecioTotal / d.Cantidad) | number:'1.2-2' }}
        </td>
      </ng-container>

      <!-- Subtotal -->
      <ng-container matColumnDef="subtotal">
        <th mat-header-cell *matHeaderCellDef class="text-right"> Subtotal </th>
        <td mat-cell *matCellDef="let d" class="text-right fw-bold">
          S/ {{ d.PrecioTotal | number:'1.2-2' }}
        </td>
      </ng-container>

      <!-- Acciones -->
      <ng-container matColumnDef="acciones">
        <th mat-header-cell *matHeaderCellDef></th>
        <td mat-cell *matCellDef="let d" class="text-right">
          <button mat-icon-button color="warn" (click)="eliminar(d)" matTooltip="Quitar">
            <mat-icon>delete_outline</mat-icon>
          </button>
        </td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="displayedColumns; sticky: true"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
      
      <!-- Empty State -->
      <tr class="mat-row" *matNoDataRow>
        <td class="mat-cell text-center py-5" colspan="5">
          <div class="empty-cart">
            <mat-icon>shopping_cart_off</mat-icon>
            <p>El carrito est치 vac칤o</p>
            <small>Agrega productos para comenzar una venta</small>
          </div>
        </td>
      </tr>
    </table>
  </div>

  <!-- Footer Totales -->
  <div class="pedido-footer mat-elevation-z4">
    <div class="total-row">
      <span class="label">Total a Pagar:</span>
      <span class="value">S/ {{ getTotal() | number:'1.2-2' }}</span>
    </div>
    
    <button mat-flat-button color="primary" class="btn-checkout" 
            (click)="realizarPedido()" 
            [disabled]="detalles.length === 0">
      <mat-icon>point_of_sale</mat-icon>
      PROCESAR PAGO
    </button>
  </div>
=======
<!-- 游댳 Cards de productos y combos compactas -->
<div class="cards-container">
  <div class="product-card" 
       *ngFor="let d of detalles" 
       [class.combo-card]="esCombo(d)"
       [title]="esCombo(d) ? getInfoCombo(d) : ''">
    
    <!-- Header con informaci칩n principal -->
    <div class="card-main-content">
      <div class="product-basic-info">
        <div class="product-header">
          <strong class="product-name">
            {{ d.nombre_producto || d.nombre_combo }}
            <span *ngIf="esCombo(d)" class="combo-badge">COMBO</span>
          </strong>
          <span class="categoria-badge">{{ d.nombre_categoria }}</span>
        </div>
        <div class="product-details">
          <span class="tamano-badge">{{ getNombreTamano(d) }}</span>
          <span class="price-tag">S/ {{ (d.PrecioTotal / d.Cantidad) | number:'1.2-2' }}</span>
        </div>
        
        <!-- 游댳 NUEVO: Mostrar productos incluidos en el combo -->
        <div *ngIf="esCombo(d)" class="combo-detalles">
          <small>{{ getProductosCombo(d) }}</small>
        </div>
      </div>
      
      <div class="card-actions">
        <button mat-icon-button color="warn" class="delete-btn" (click)="eliminar(d)">
          <mat-icon>delete</mat-icon>
        </button>
      </div>
    </div>

    <!-- Footer con controles y subtotal -->
    <div class="card-footer">
      <div class="subtotal-section">
        <span class="subtotal-label">Subtotal:</span>
        <span class="subtotal-value">S/ {{ d.PrecioTotal | number:'1.2-2' }}</span>
      </div>
      
      <div class="quantity-section">
        <div class="cantidad-control-horizontal">
          <button mat-mini-button class="qty-btn qty-decrease" (click)="reducirCantidad(d)">
            <mat-icon>remove</mat-icon>
          </button>
          <span class="quantity-number">{{ d.Cantidad }}</span>
          <button mat-mini-button class="qty-btn qty-increase" (click)="aumentarCantidad(d)">
            <mat-icon>add</mat-icon>
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Mensaje cuando no hay productos -->
  <div class="empty-state" *ngIf="detalles.length === 0">
    <mat-icon class="empty-icon">shopping_cart</mat-icon>
    <h3>No hay productos en el pedido</h3>
    <p>Agrega productos para continuar</p>
  </div>
</div>

<!-- 游댳 Total y bot칩n -->
<div class="total-container">
  <h3 class="total-text">Total: S/ {{ getTotal() | number:'1.2-2' }}</h3>
  <button mat-raised-button class="order-btn" (click)="realizarPedido()">
    <mat-icon>send</mat-icon>
    Confirmar pedido
  </button>
>>>>>>> 71628ab0a6a7f3d7dbb4c222b0490f1c7f17032c
</div>