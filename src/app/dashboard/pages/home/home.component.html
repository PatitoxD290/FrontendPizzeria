<div class="dashboard-container">
  <!-- Cards principales -->
  <div class="stats-cards">
    <!-- Ventas Totales -->
    <div class="stat-card sales-card">
      <div class="icon-container sales">
        <span class="material-icons">trending_up</span>
      </div>
      <div class="card-content">
        <h3>Ventas Totales</h3>
        <p class="stat-value" *ngIf="!loadingCards">{{ formatCurrency(ventasTotales) }}</p>
        <p class="stat-value" *ngIf="loadingCards">Cargando...</p>
        <div class="trend-container">
          <span class="trend-indicator trend-up">{{ tendenciaVentasTotales }}</span>
          <span class="trend-text">vs mes anterior</span>
        </div>
      </div>
    </div>

    <!-- Pedidos Hoy - Card Roja -->
    <div class="stat-card orders-card">
      <div class="icon-container orders">
        <span class="material-icons">shopping_bag</span>
      </div>
      <div class="card-content">
        <h3>Pedidos Hoy</h3>
        <p class="stat-value" *ngIf="!loadingCards">{{ pedidosHoy }}</p>
        <p class="stat-value" *ngIf="loadingCards">Cargando...</p>
        <div class="trend-container">
          <span class="trend-indicator trend-up">{{ tendenciaPedidosHoy }}</span>
          <span class="trend-text">vs ayer</span>
        </div>
      </div>
    </div>

    <!-- Ventas de hoy -->
    <div class="stat-card product-card">
      <div class="icon-container sales">
        <span class="material-icons">shopping_cart</span>
      </div>
      <div class="card-content">
        <h3>Ventas de hoy</h3>
        <p class="stat-value" *ngIf="!loadingCards">{{ formatCurrency(ventasHoy) }}</p>
        <p class="stat-value" *ngIf="loadingCards">Cargando...</p>
        <div class="trend-container">
          <span class="trend-indicator trend-up">{{ tendenciaVentasHoy }}</span>
          <span class="trend-text">vs ayer</span>
        </div>
      </div>
    </div>

    <!-- Total Clientes -->
    <div class="stat-card clients-card">
      <div class="icon-container clients">
        <span class="material-icons">people</span>
      </div>
      <div class="card-content">
        <h3>Total Clientes</h3>
        <p class="stat-value" *ngIf="!loadingCards">{{ totalClientes }}</p>
        <p class="stat-value" *ngIf="loadingCards">Cargando...</p>
        <div class="trend-container">
          <span class="trend-indicator trend-up">{{ tendenciaClientes }}</span>
          <span class="trend-text">+84 nuevos</span>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="contenedor-grafico">
  <div class="header-grafico">
    <h2>Ventas Semanales</h2>
    <select (change)="cambiarPeriodoGrafico($event)">
      <option>Esta Semana</option>
      <option>Semana Pasada</option>
      <option>Último Mes</option>
    </select>
  </div>

  <div class="grafico">
    <div class="eje-y">
      <span>{{ formatCurrency(maxVentaSemana) }}</span>
      <span>{{ formatCurrency(maxVentaSemana * 0.8) }}</span>
      <span>{{ formatCurrency(maxVentaSemana * 0.6) }}</span>
      <span>{{ formatCurrency(maxVentaSemana * 0.4) }}</span>
      <span>{{ formatCurrency(maxVentaSemana * 0.2) }}</span>
      <span>S/ 0</span>
    </div>

    <div class="lineas-referencia">
      <div class="linea-referencia" style="top: 0%"></div>
      <div class="linea-referencia" style="top: 20%"></div>
      <div class="linea-referencia" style="top: 40%"></div>
      <div class="linea-referencia" style="top: 60%"></div>
      <div class="linea-referencia" style="top: 80%"></div>
    </div>

    <div class="barras" *ngIf="!loadingChart">
      <div class="barra" *ngFor="let venta of ventasSemanales; let i = index" 
           [style.--valor]="calcularAlturaBarra(venta)">
        <span class="valor">{{ getValorBarra(i) }}</span>
      </div>
    </div>

    <!-- Estado de carga del gráfico -->
    <div class="barras" *ngIf="loadingChart">
      <div class="barra" *ngFor="let i of [0,1,2,3,4,5,6]" 
           style="--valor: 30%; background: #ccc;">
        <span class="valor">Cargando...</span>
      </div>
    </div>
  </div>

  <!-- Días debajo -->
  <div class="dias">
    <span>Lun</span>
    <span>Mar</span>
    <span>Mié</span>
    <span>Jue</span>
    <span>Vie</span>
    <span>Sáb</span>
    <span>Dom</span>
  </div>
</div>