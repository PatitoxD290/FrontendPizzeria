<h2 mat-dialog-title class="dialog-title">
  Detalles del Pedido #{{ data.pedido_id }}
</h2>

<mat-dialog-content class="dialog-content">
  <!-- ðŸŒ€ Loading Spinner -->
  <div *ngIf="loading" class="spinner-container">
    <mat-spinner diameter="50"></mat-spinner>
  </div>

  <!-- âš ï¸ Error -->
  <div *ngIf="!loading && error" class="error-text">
    <mat-card>
      <mat-card-content>
        <p>{{ error }}</p>
      </mat-card-content>
    </mat-card>
  </div>

  <!-- ðŸ“ Notas del pedido -->
  <div *ngIf="!loading && !error && notas" class="detalle-texto">
    <mat-card>
      <mat-card-content>
        <p><strong>Notas:</strong></p>
        <p>{{ notas }}</p>
      </mat-card-content>
    </mat-card>
  </div>

  <!-- ðŸ“¦ Detalles como cards -->
  <div *ngIf="!loading && !error && detalles.length > 0; else sinDatos">
    
    <!-- Lista de productos -->
    <div class="items-list">
      <div *ngFor="let d of detalles" class="item-row">
        
        <!-- Cantidad -->
        <div class="item-qty">
          {{ d.Cantidad }}x
        </div>

        <!-- DescripciÃ³n -->
        <div class="item-desc">
          <div class="item-name">
            {{ getItemName(d) }}
            <span *ngIf="isCombo(d)" class="combo-badge">Combo</span>
          </div>
          <div class="item-meta">
            {{ getItemDetail(d) }}
            <!-- ðŸŸ¢ MOSTRAR PRECIO UNITARIO -->
            <div class="precio-unitario" *ngIf="getPrecioUnitario(d) > 0">
              S/ {{ getPrecioUnitario(d) | number:'1.2-2' }} c/u
            </div>
          </div>
        </div>

        <!-- Precio Total del item -->
        <div class="item-price">
          S/ {{ getPrecioTotal(d) | number:'1.2-2' }}
        </div>

      </div>
    </div>

    <!-- Total -->
    <mat-card class="total-card">
      <mat-card-content>
        <p><strong>Total del pedido:</strong> S/ {{ getTotal() | number:'1.2-2' }}</p>
      </mat-card-content>
    </mat-card>
  </div>

  <ng-template #sinDatos>
    <p class="text-gray-500 text-center">No hay detalles disponibles para este pedido.</p>
  </ng-template>
</mat-dialog-content>

<mat-dialog-actions align="end">
  <button mat-raised-button color="primary" (click)="close()">Cerrar</button>
</mat-dialog-actions>