<!-- Buscador -->
<div class="buscador-container">
  <mat-icon>search</mat-icon>
  <input type="text" placeholder="Buscar por nombre, categor√≠a o descripci√≥n..." [(ngModel)]="terminoBusqueda" (input)="buscarProducto()" />
</div>

<!-- Botones de categor√≠as -->
<div class="categorias-container">
  <!-- Bot√≥n Todos -->
  <button mat-raised-button 
          [color]="isCategoriaSeleccionada(null) ? 'primary' : ''" 
          (click)="filtrarPorCategoria(null)">
    Todos
  </button>

  <!-- Bot√≥n Combos -->
  <button mat-raised-button 
          [color]="isCategoriaSeleccionada(CATEGORIA_COMBOS) ? 'primary' : ''" 
          class="combo-category-btn"
          (click)="filtrarPorCategoria(CATEGORIA_COMBOS)">
    Combos
  </button>

  <!-- Categor√≠as normales de productos -->
  <button *ngFor="let cat of categorias" 
          mat-raised-button 
          [color]="isCategoriaSeleccionada(cat.ID_Categoria_P) ? 'primary' : ''" 
          (click)="filtrarPorCategoria(cat.ID_Categoria_P)">
    {{ cat.Nombre }}
  </button>
</div>

<!-- LISTA DE PRODUCTOS Y COMBOS -->
<div class="menu-scroll">
  <mat-card *ngFor="let item of paginatedItems" 
            class="producto-card"
            [class.combo-card]="item.esCombo"
            (click)="abrirModalCantidad(item)"
            [title]="item.esCombo ? getInfoCombo(item) : ''">
    
    <mat-card-header>
      <mat-card-title>
        {{ item.nombre }}
        <span *ngIf="item.esCombo" class="combo-badge">COMBO</span>
      </mat-card-title>
      <mat-card-subtitle>
        <span class="categoria" [class.combo-categoria]="item.esCombo">
          {{ getCategoria(item) }}
        </span>
        <!-- INDICADOR DE TAMA√ëOS DISPONIBLES (solo productos) -->
        <span *ngIf="!item.esCombo && tieneMultiplesTamanos(item)" class="multiples-tamanos">
          ‚Ä¢ {{ getTamanosDisponibles(item) }} tama√±os
        </span>
        <span *ngIf="!item.esCombo && !tieneMultiplesTamanos(item)" class="tamano-unico">
          ‚Ä¢ 1 tama√±o
        </span>
        <!-- üîπ CORREGIDO: Mostrar productos del combo -->
        <span *ngIf="item.esCombo" class="combo-info" [title]="getInfoCombo(item)">
          ‚Ä¢ {{ getProductosCombo(item) || 'Cargando productos...' }}
        </span>
      </mat-card-subtitle>
    </mat-card-header>
    
    <mat-card-content>
      <p class="descripcion">{{ item.descripcion }}</p>
      
      <!-- PRECIO -->
      <div class="precio-container" [class.combo-precio]="item.esCombo">
        <span *ngIf="!item.esCombo && tieneMultiplesTamanos(item)" class="precio-desde">Desde: </span>
        <span *ngIf="item.esCombo" class="precio-combo-text">Precio especial: </span>
        <span class="precio" [class.combo-precio-number]="item.esCombo">
          S/ {{ item.precio | number:'1.2-2' }}
        </span>
      </div>

      <!-- Informaci√≥n adicional -->
      <div class="info-adicional">
        <small>Disponible ‚Ä¢ {{ getCantidadDisponible(item) }} unidades</small>
      </div>

    </mat-card-content>
  </mat-card>
</div>

<!-- Mensaje cuando no hay resultados -->
<div *ngIf="menuItemsFiltrados.length === 0" class="no-results">
  <mat-icon>search_off</mat-icon>
  <p>No se encontraron productos o combos</p>
</div>

<!-- Paginador Angular Material -->
<mat-paginator
  [length]="menuItemsFiltrados.length" 
  [pageSize]="pageSize" 
  [pageSizeOptions]="[3, 6, 9, 12]" 
  (page)="onPageChange($event)">
</mat-paginator>