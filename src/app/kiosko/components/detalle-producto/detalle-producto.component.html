<div class="detalle-container">
  <img [src]="imagen" [alt]="nombre" class="detalle-imagen" (error)="onImageError($event)" />

  <h2>{{ nombre }}</h2>
  <p class="producto-descripcion">{{ descripcion || 'Sin descripci√≥n disponible.' }}</p>

  <!-- üîπ INFORMACI√ìN DEL TIPO -->
  <div class="tipo-info" *ngIf="esCombo">
    <span class="badge-combo">COMBO</span>
  </div>

  <!-- üîπ SELECCI√ìN DE TAMA√ëOS (SOLO PARA PRODUCTOS INDIVIDUALES) -->
  <div *ngIf="!esCombo && tamanosDisponibles && tamanosDisponibles.length > 1" class="tamanos-section">
    <h3>Selecciona un tama√±o:</h3>
    <div class="tamanos-grid">
      <button 
        *ngFor="let tamano of tamanosDisponibles" 
        class="tamano-btn" 
        [class.selected]="tamanoSeleccionado?.ID_Producto_T === tamano.ID_Producto_T"
        (click)="seleccionarTamano(tamano)">
        <span class="tamano-nombre">{{ tamano.nombre_tamano }}</span>
      </button>
    </div>
  </div>

  <!-- üîπ INFORMACI√ìN DEL PRECIO Y CANTIDAD -->
  <div class="precio-cantidad-section">
    <div class="precio-info">
      <p class="tamano-seleccionado" *ngIf="!esCombo && tamanoSeleccionado">
        <strong>{{ tamanoSeleccionado.nombre_tamano }}</strong>
      </p>
      <p class="precio-total">S/. {{ precioTotal | number:'1.2-2' }}</p>
    </div>

    <!-- Controles de cantidad -->
    <div class="cantidad-container">
      <div class="cantidad-controls">
        <button (click)="decrementarCantidad()">‚àí</button>
        <span class="cantidad-display">{{ cantidad }}</span>
        <button (click)="incrementarCantidad()">+</button>
      </div>
    </div>
  </div>

  <!-- üîπ BOT√ìN A√ëADIR COMPLEMENTOS - PARA PRODUCTOS NO BEBIDAS Y COMBOS -->
  <div class="complementos-section" *ngIf="puedeAgregarComplementos">
    <button class="btn-complementos" (click)="abrirComplementos()">
      <div class="btn-complementos-content">
        <mat-icon>local_cafe</mat-icon>
        <div class="btn-complementos-text">
          <span *ngIf="tieneComplementos; else sinComplementos" class="btn-complementos-count">
            {{ cantidadComplementos }} seleccionado(s)
          </span>
          <ng-template #sinComplementos>
            <span class="btn-complementos-title">
              {{ esCombo ? 'A√±adir Complementos' : 'A√±adir Complementos' }}
            </span>
          </ng-template>
        </div>
      </div>
    </button>
  </div>

  <!-- Botones abajo -->
  <div class="acciones">
    <button class="btn-volver" (click)="cerrar()">Volver</button>
    <button class="btn-agregar" 
            (click)="agregarAlCarrito()" 
            [disabled]="!esCombo && !tamanoSeleccionado">
      <mat-icon>add_shopping_cart</mat-icon>
      Agregar {{ tipoProducto }}
    </button>
  </div>
</div>