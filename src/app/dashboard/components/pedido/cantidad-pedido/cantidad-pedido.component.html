<div class="modal-container">
  
  <!-- Header -->
  <div class="modal-header">
<<<<<<< HEAD
    <h2 class="modal-title">Agregar al Pedido</h2>
=======
    <h2 class="modal-title">Seleccionar {{ esCombo ? 'combo' : 'producto' }}</h2>
>>>>>>> 71628ab0a6a7f3d7dbb4c222b0490f1c7f17032c
    <button mat-icon-button class="close-button" (click)="cancelar()">
      <mat-icon>close</mat-icon>
    </button>
  </div>

  <!-- Informaci√≥n del producto/combo -->
  <div class="producto-info">
<<<<<<< HEAD
    <h3 class="producto-nombre">{{ data.producto.Nombre }}</h3>
    
    <div class="producto-meta">
      <span class="categoria-badge">{{ data.producto.nombre_categoria || 'Producto' }}</span>
      <span class="stock-text" [class.text-warn]="data.producto.Cantidad_Disponible === 0">
        {{ disponibleTexto }}
      </span>
    </div>
    
    <p class="producto-descripcion" *ngIf="data.producto.Descripcion">
      {{ data.producto.Descripcion }}
=======
    <h3 class="producto-nombre">{{ nombreItem }}</h3>
    <div class="producto-detalles">
      <span class="categoria">{{ categoriaItem }}</span>
      <span *ngIf="esCombo" class="combo-indicator">‚Ä¢ COMBO</span>
    </div>
    <p class="producto-descripcion" *ngIf="descripcionItem">
      {{ descripcionItem }}
>>>>>>> 71628ab0a6a7f3d7dbb4c222b0490f1c7f17032c
    </p>
    
    <!-- üîπ NUEVO: Mostrar productos incluidos en el combo -->
    <div *ngIf="esCombo" class="combo-detalles" [title]="getInfoCombo()">
      <strong>Incluye:</strong> {{ getProductosCombo() }}
    </div>
  </div>

<<<<<<< HEAD
  <!-- üîπ SELECTOR DE TAMA√ëOS (GRID DE BOTONES) -->
  <div class="tamanos-container" *ngIf="tamanosDisponibles.length > 0">
    <label class="section-label">Selecciona un tama√±o:</label>
=======
  <!-- SELECTOR DE TAMA√ëOS SOLO PARA PRODUCTOS -->
  <div class="tamanos-container" *ngIf="!esCombo && tamanosDisponibles.length > 0">
    <label class="tamanos-label">Selecciona un tama√±o:</label>
>>>>>>> 71628ab0a6a7f3d7dbb4c222b0490f1c7f17032c
    
    <div class="tamanos-grid">
      <button 
        *ngFor="let tamano of tamanosDisponibles" 
        type="button"
        class="tamano-card"
        [class.selected]="tamanoSeleccionado?.ID_Producto_T === tamano.ID_Producto_T"
        (click)="seleccionarTamano(tamano)">
        
        <div class="tamano-content">
          <span class="tamano-name">{{ tamano.nombre_tamano || '√önico' }}</span>
          <span class="tamano-price">S/ {{ tamano.Precio | number:'1.2-2' }}</span>
        </div>
        
        <div class="check-icon" *ngIf="tamanoSeleccionado?.ID_Producto_T === tamano.ID_Producto_T">
          <mat-icon>check_circle</mat-icon>
        </div>
      </button>
    </div>
  </div>

  <!-- INFORMACI√ìN DE PRECIO PARA COMBOS -->
  <div class="precio-combo-container" *ngIf="esCombo">
    <div class="precio-info">
      <span class="precio-label">Precio del combo:</span>
      <span class="precio-combo">S/ {{ precioUnitario | number:'1.2-2' }}</span>
    </div>
  </div>

  <!-- Control de cantidad -->
<<<<<<< HEAD
  <div class="cantidad-section" *ngIf="tamanoSeleccionado">
    <label class="section-label">Cantidad:</label>
=======
  <div class="cantidad-container" *ngIf="esCombo || tamanoSeleccionado">
    <label class="cantidad-label">Cantidad:</label>
>>>>>>> 71628ab0a6a7f3d7dbb4c222b0490f1c7f17032c
    
    <div class="cantidad-wrapper">
      <button mat-mini-fab color="basic" class="qty-btn" 
              (click)="reducirCantidad()" [disabled]="cantidad <= 1">
        <mat-icon>remove</mat-icon>
      </button>
      
      <input type="number" 
             class="qty-input" 
             [value]="cantidad" 
             (input)="validarEntrada($event)"
             (blur)="onCantidadChange($event)">
      
      <button mat-mini-fab color="basic" class="qty-btn" 
              (click)="aumentarCantidad()" [disabled]="cantidad >= maxCantidad">
        <mat-icon>add</mat-icon>
      </button>
    </div>
  </div>

<<<<<<< HEAD
  <div class="divider"></div>

  <!-- Totales -->
  <div class="total-section" *ngIf="tamanoSeleccionado">
    <div class="desglose">
      <span>{{ cantidad }} x S/ {{ precioUnitario | number:'1.2-2' }}</span>
    </div>
    <div class="total-row">
      <span class="total-label">Total a pagar</span>
      <span class="total-amount">S/ {{ precioTotal | number:'1.2-2' }}</span>
=======
  <!-- Precio total -->
  <div class="total-container" *ngIf="esCombo || tamanoSeleccionado">
    <div class="total-line"></div>
    <div class="total-info">
      <span class="total-label">Total a pagar:</span>
      <span class="total-precio">S/ {{ precioTotal | number:'1.2-2' }}</span>
    </div>
    <div class="desglose-precio" *ngIf="esCombo || tamanoSeleccionado">
      <small>{{ cantidad }} √ó S/ {{ precioUnitario | number:'1.2-2' }} = S/ {{ precioTotal | number:'1.2-2' }}</small>
>>>>>>> 71628ab0a6a7f3d7dbb4c222b0490f1c7f17032c
    </div>
  </div>

  <!-- Botones de acci√≥n -->
  <div class="action-buttons">
    <button mat-stroked-button (click)="cancelar()" class="btn-cancel">
      Cancelar
    </button>
    
<<<<<<< HEAD
    <button mat-flat-button color="primary" class="btn-add" 
            (click)="agregarAlPedido()" 
            [disabled]="!tamanoSeleccionado || cantidad <= 0">
      <mat-icon>shopping_cart</mat-icon>
      Agregar al Pedido
=======
    <button mat-raised-button 
            color="primary" 
            class="add-btn"
            (click)="agregarAlPedido()"
            [disabled]="!esCombo && !tamanoSeleccionado">
      <mat-icon>shopping_bag</mat-icon>
      Agregar (S/ {{ precioTotal | number:'1.2-2' }})
>>>>>>> 71628ab0a6a7f3d7dbb4c222b0490f1c7f17032c
    </button>
  </div>
</div>